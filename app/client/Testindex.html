<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>Uniquity Solutions - Client Dashboard</title>
    <link rel="stylesheet" href="../shared/global.css" />
    <link rel="stylesheet" href="app/client/client.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
        :root {
            --bg: #96A3B1; 
            --text: #1f2937; 
            --muted: #4b5563; 
            --card: #ffffff; 
            --primary: #e94b4b; 
            --accent: #fbbf24; 
            --shadow: 0 10px 30px rgba(2,6,23,.15); 
            --radius: 18px; 
            --nav-h: 56px; 
        }
        * { box-sizing: border-box; }
        html, body { height: 100%; margin: 0; font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; color: var(--text); background: var(--bg); }
        
        /* Top nav */
        .nav {
            position: sticky; top: 0; z-index: 1100;
            background: linear-gradient(to bottom, rgba(150,163,177,0.9), rgba(150,163,177,0.6));
            backdrop-filter: blur(8px);
            border-bottom: 1px solid rgba(255,255,255,.15);
            height: var(--nav-h);
        }
        .nav-inner {
            display: flex; 
            align-items: center; 
            justify-content: space-between; 
            padding: 10px 20px; 
            max-width: 1200px; 
            margin: 0 auto; 
            flex-wrap: wrap; /* Allow wrapping for smaller screens */
        }
        .brand { 
            display: flex; 
            align-items: center; 
            gap: 12px; 
            font-weight: 700; 
            color: #fff; 
        }
        .brand-mark { 
            width: 28px; 
            height: 28px; 
            border-radius: 6px; 
            background: linear-gradient(135deg, #fff, #ffd6a3); 
            display: inline-block; 
        }
        .nav-buttons {
            display: flex; 
            gap: 10px; /* Space between buttons */
            flex-wrap: wrap; /* Allow wrapping for smaller screens */
        }
        .container { 
            width: 100%; 
            max-width: 1200px; 
            margin: 0 auto; 
            padding: 0 16px; 
        }
        
        /* Layout: sidebar + main content */
        .layout { 
            display: grid; 
            grid-template-columns: 260px 1fr; 
            gap: 16px; 
            padding: 20px 0; 
        }
        aside { 
            background: #fff; 
            border: 1px solid #e5e7eb; 
            border-radius: 16px; 
            padding: 16px; 
        }
        main { 
            display: grid; 
            gap: 16px; 
            align-content: start; 
        }

        /* Panels */
        .panel { 
            padding: 16px; 
            border-radius: 12px; 
            border: 1px solid #e5e7eb; 
            background: #fff; 
            min-height: 180px; 
        }
        .section-title { 
            font-size: 12px; 
            text-transform: uppercase; 
            color: #64748b; 
            margin-bottom: 6px; 
            letter-spacing: .5px; 
        }
        h1, h2 { margin: 0 0 8px; }
        
        /* Notifications */
        #notificationsList { margin-top: 10px; }
        .notification { padding: 8px; border: 1px solid #ddd; border-radius: 8px; margin-bottom: 6px; }
        
        /* Buttons & inputs */
        .btn { 
            background: var(--primary); 
            color: #fff; 
            border: 0; 
            padding: 10px 14px; 
            border-radius: 8px; 
            font-weight: 700; 
            cursor: pointer; 
            width: 100%; /* Make buttons full width */
            margin-bottom: 10px; /* Space between buttons */
        }
        .input { padding: 8px 10px; border: 1px solid #ddd; border-radius: 8px; width: 100%; }

        /* Search Input */
        #invoice-search {
            margin-bottom: 10px;
            width: calc(100% - 20px);
        }

        /* Status bar for initialization */
        #status-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background-color: var(--primary);
            color: white;
            text-align: center;
            padding: 10px;
            display: none; /* Hidden by default */
        }

        /* Mobile Styles */
        @media (max-width: 768px) {
            .layout {
                grid-template-columns: 1fr; /* Stack columns on smaller screens */
            }
            .nav-inner {
                flex-direction: column; /* Stack navigation items vertically */
            }
        }
    </style>
</head>
<body>
    <div id="client-root" class="client-root">
        <header class="nav">
            <div class="nav-inner">
                <div class="brand">
                    <span class="brand-mark"></span> Uniquity Solutions - Client Dashboard
                </div>
                <div class="nav-buttons">
                    <button id="refreshBtn" class="btn">Refresh Data</button>
                    <button id="signOutBtn" class="btn btn-secondary">Sign out</button>
                </div>
            </div>
        </header>

        <main class="container layout">
            <!-- Left Nav -->
            <aside class="sidebar">
                <div class="panel">
                    <div class="section-title">Overview</div>
                    <div id="clientGreeting">Welcome, Client!</div>
                    <div id="total-balance">Total Balance: $0.00</div>
                    <div id="available-balance">Available for Payout: $0.00</div>
                    <div id="pending-balance">Pending Balance: $0.00</div> <!-- New line for pending balance -->
                </div>

                <div class="panel">
                    <div class="section-title">Notifications</div>
                    <div id="notificationsList">No notifications</div>
                </div>

                <div class="panel">
                    <div class="section-title">Recent Payments</div>
                    <table class="table" id="payments-table">
                        <thead>
                            <tr><th>ID</th><th>Invoice</th><th>Amount</th><th>Currency</th><th>Status</th><th>Date</th></tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
                
                <div class="panel">
                    <div class="section-title">Tenant to Tenant Payment</div>
                    <input type="text" id="recipient-id" placeholder="Recipient User ID" class="input" />
                    <input type="number" id="tenant-payment-amount" placeholder="Enter amount" class="input" />
                    <button id="send-payment" class="btn">Send Payment</button>
                </div>

                <div class="panel">
                    <div class="section-title">Payouts</div>
                    <div id="payouts-section">
                        <input type="number" id="payout-amount" placeholder="Enter amount" class="input" />
                        <button id="payout-now" class="btn">Payout now</button>
                    </div>
                </div>

                <div class="panel">
                    <div class="section-title">Profile</div>
                    <form id="settings-form">
                        <input type="text" id="settings-name" placeholder="Display Name" class="input" />
                        <input type="email" id="settings-email" placeholder="Email" class="input" />
                        <input type="password" id="settings-password" placeholder="Password" class="input" />
                        <input type="text" id="settings-bank" placeholder="Bank Information" class="input" />
                        <input type="text" id="settings-account" placeholder="Account Number" class="input" />
                        <input type="text" id="settings-phone" placeholder="Phone Number" class="input" />
                        <button type="submit" class="btn">Update Profile</button>
                    </form>
                </div>

                <!-- Left Ads Section -->
                <div class="panel" id="leftAdsSection">
                    <div class="section-title">Advertisements</div>
                    <div id="leftAdsList">Loading ads...</div>
                </div>
            </aside>

            <!-- Right Content -->
            <section class="main" id="clientMain">
                <!-- Top Ad -->
                <div class="panel" id="topAdsSection">
                    <div class="section-title">Advertisements</div>
                    <div id="topAdsList">Loading ads...</div>
                </div>

                <div class="panel" id="clientNotificationsPanel">
                    <div class="section-title">Notifications</div>
                    <div id="notificationsList">No notifications</div>
                </div>

                <!-- Search for Invoices -->
                <div class="panel">
                    <div class="section-title">Search Invoices</div>
                    <input type="text" id="invoice-search" placeholder="Search invoices..." class="input" />
                    <button id="search-invoices" class="btn">Search</button>
                </div>

                <!-- Bottom Ad -->
                <div class="panel" id="bottomAdsSection">
                    <div class="section-title">Advertisements</div>
                    <div id="bottomAdsList">Loading ads...</div>
                </div>
            </section>

            <!-- Right Sidebar -->
            <aside class="sidebar">
                <div class="panel" id="rightAdsSection">
                    <div class="section-title">Advertisements</div>
                    <div id="rightAdsList">Loading ads...</div>
                </div>
            </aside>
        </main>

        <!-- Status Bar for Initialization -->
        <div id="status-bar">Loading keys and user data...</div>
    </div>

    <script src="https://unpkg.com/@supabase/supabase-js/dist/umd/supabase.js"></script>
    <script src="app/client/client.js"></script>
</body>
</html>
